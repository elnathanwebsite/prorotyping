<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Toko Buku Islam - Temukan Buku Berkualitas untuk Kehidupan Islami</title>
    <style>
        :root {
            --primary: #1e88e5;
            --primary-light: #e3f2fd;
            --primary-dark: #1565c0;
            --secondary: #42a5f5;
            --light: #ffffff;
            --dark: #333333;
            --border: #e0e0e0;
            --success: #43a047;
            --danger: #e53935;
            --warning: #ffb300;
            --accent: #0d47a1;
            --font-family: 'Inter', 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
            --heading-font: 'Poppins', 'Inter', 'Segoe UI', Roboto, sans-serif;
        }

        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Poppins:wght@500;600;700&display=swap');

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: var(--font-family);
            background-color: #f5f9ff;
            color: var(--dark);
            line-height: 1.6;
            font-weight: 400;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 1rem;
        }

        /* Top Banner Styles */
        .top-banner {
            background: linear-gradient(90deg, var(--primary) 0%, var(--secondary) 100%);
            color: var(--light);
            padding: 0.5rem 0;
            text-align: center;
            font-size: 0.9rem;
            position: relative;
        }

        .top-banner-content {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 1rem;
        }

        .top-banner .close-banner {
            background: none;
            border: none;
            color: var(--light);
            font-size: 1.2rem;
            cursor: pointer;
            position: absolute;
            right: 1rem;
            top: 50%;
            transform: translateY(-50%);
        }

        /* Header Styles */
        header {
            background-color: var(--light);
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .header-top {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1rem 0;
            border-bottom: 1px solid var(--border);
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        .logo img {
            height: 40px;
        }

        .logo h1 {
            font-family: var(--heading-font);
            font-size: 1.5rem;
            color: var(--primary);
            font-weight: 600;
        }

        .header-actions {
            display: flex;
            gap: 1rem;
            align-items: center;
        }

        .language-selector, .currency-selector {
            position: relative;
        }

        .language-btn, .currency-btn {
            background: var(--light);
            border: 1px solid var(--border);
            border-radius: 8px;
            padding: 0.5rem 1rem;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 0.9rem;
            transition: all 0.2s ease;
        }

        .language-btn:hover, .currency-btn:hover {
            border-color: var(--primary);
            box-shadow: 0 2px 8px rgba(0,0,0,0.08);
        }

        .language-dropdown, .currency-dropdown {
            position: absolute;
            top: 100%;
            right: 0;
            background: var(--light);
            border: 1px solid var(--border);
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.08);
            z-index: 1000;
            min-width: 150px;
            display: none;
            margin-top: 0.5rem;
        }

        .language-dropdown.show, .currency-dropdown.show {
            display: block;
        }

        .language-option, .currency-option {
            padding: 0.75rem 1rem;
            cursor: pointer;
            transition: background 0.2s;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .language-option:hover, .currency-option:hover {
            background: var(--primary-light);
        }

        .language-option.active, .currency-option.active {
            background: var(--primary-light);
            color: var(--primary);
            font-weight: 500;
        }

        .nav-main {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1rem 0;
        }

        .nav-links {
            display: flex;
            gap: 2rem;
        }

        .nav-link {
            text-decoration: none;
            color: var(--dark);
            font-weight: 500;
            transition: color 0.2s;
            position: relative;
        }

        .nav-link:hover {
            color: var(--primary);
        }

        .nav-link.active {
            color: var(--primary);
        }

        .nav-link.active::after {
            content: '';
            position: absolute;
            bottom: -8px;
            left: 0;
            width: 100%;
            height: 2px;
            background-color: var(--primary);
        }

        .search-bar {
            display: flex;
            align-items: center;
            background: var(--light);
            border: 1px solid var(--border);
            border-radius: 8px;
            padding: 0.5rem 1rem;
            width: 300px;
        }

        .search-bar input {
            border: none;
            outline: none;
            flex: 1;
            padding: 0.25rem 0;
            font-size: 0.9rem;
        }

        .search-bar button {
            background: none;
            border: none;
            cursor: pointer;
            color: var(--dark);
        }

        /* Contact Info Bar */
        .contact-bar {
            background: var(--primary-light);
            padding: 0.75rem 0;
            border-top: 1px solid var(--border);
        }

        .contact-info {
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 1rem;
        }

        .contact-item {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 0.9rem;
            color: var(--dark);
        }

        .contact-item strong {
            color: var(--primary);
        }

        /* Hero Section */
        .hero {
            background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
            color: var(--light);
            padding: 4rem 0;
            text-align: center;
            margin-bottom: 3rem;
            border-radius: 0 0 20px 20px;
        }

        .hero h1 {
            font-family: var(--heading-font);
            font-size: 2.5rem;
            margin-bottom: 1rem;
            font-weight: 700;
        }

        .hero p {
            font-size: 1.2rem;
            max-width: 600px;
            margin: 0 auto 2rem;
            opacity: 0.9;
        }

        .hero-buttons {
            display: flex;
            gap: 1rem;
            justify-content: center;
            flex-wrap: wrap;
        }

        .btn {
            padding: 0.75rem 1.5rem;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 600;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            font-family: var(--font-family);
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }

        .btn-primary {
            background: var(--light);
            color: var(--primary);
        }

        .btn-secondary {
            background: transparent;
            color: var(--light);
            border: 2px solid var(--light);
        }

        .btn-success {
            background: var(--success);
            color: var(--light);
        }

        .btn-warning {
            background: var(--warning);
            color: var(--light);
        }

        /* Categories Section */
        .section {
            margin-bottom: 3rem;
        }

        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
        }

        .section-title {
            font-family: var(--heading-font);
            font-size: 1.8rem;
            color: var(--primary);
            font-weight: 600;
        }

        .view-all {
            color: var(--accent);
            text-decoration: none;
            font-weight: 500;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .categories-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 1.5rem;
        }

        .category-card {
            background: var(--light);
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 2px 15px rgba(0,0,0,0.04);
            transition: transform 0.3s, box-shadow 0.3s;
            cursor: pointer;
            border: 1px solid var(--border);
        }

        .category-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.1);
        }

        .category-image {
            width: 100%;
            height: 150px;
            object-fit: cover;
        }

        .category-content {
            padding: 1.25rem;
        }

        .category-name {
            font-weight: 600;
            margin-bottom: 0.5rem;
            color: var(--dark);
        }

        .category-count {
            font-size: 0.875rem;
            color: #6c757d;
        }

        /* Books Section */
        .books-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 2rem;
        }

        .book-card {
            background: var(--light);
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 2px 15px rgba(0,0,0,0.04);
            transition: transform 0.3s, box-shadow 0.3s;
            border: 1px solid var(--border);
        }

        .book-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.1);
        }

        .book-image {
            width: 100%;
            height: 250px;
            object-fit: cover;
        }

        .book-content {
            padding: 1.5rem;
        }

        .book-title {
            font-weight: 600;
            margin-bottom: 0.5rem;
            color: var(--dark);
            line-height: 1.3;
        }

        .book-author {
            color: #6c757d;
            margin-bottom: 0.75rem;
            font-size: 0.9rem;
        }

        .book-meta {
            display: flex;
            gap: 0.75rem;
            margin-bottom: 1rem;
            flex-wrap: wrap;
        }

        .book-meta-item {
            display: flex;
            align-items: center;
            gap: 0.25rem;
            font-size: 0.8rem;
            color: #6c757d;
        }

        .book-price {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            margin-bottom: 1rem;
        }

        .price-original {
            text-decoration: line-through;
            color: #6c757d;
            font-size: 0.9rem;
        }

        .price-final {
            font-weight: 600;
            color: var(--danger);
            font-size: 1.1rem;
        }

        .discount-badge {
            background: var(--danger);
            color: var(--light);
            padding: 0.25rem 0.5rem;
            border-radius: 4px;
            font-size: 0.75rem;
            font-weight: 600;
        }

        .book-actions {
            display: flex;
            gap: 0.75rem;
        }

        .btn-order {
            background: var(--primary);
            color: var(--light);
            flex: 1;
            justify-content: center;
        }

        .btn-detail {
            background: transparent;
            color: var(--primary);
            border: 1px solid var(--primary);
            justify-content: center;
        }

        /* Banner Section */
        .banner-section {
            margin-bottom: 3rem;
        }

        .banner-slider {
            position: relative;
            overflow: hidden;
            border-radius: 12px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
        }

        .banner-slide {
            display: none;
            position: relative;
        }

        .banner-slide.active {
            display: block;
        }

        .banner-image {
            width: 100%;
            height: 400px;
            object-fit: cover;
        }

        .banner-content {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            background: linear-gradient(transparent, rgba(0,0,0,0.7));
            color: var(--light);
            padding: 2rem;
        }

        .banner-title {
            font-family: var(--heading-font);
            font-size: 1.8rem;
            margin-bottom: 0.5rem;
            font-weight: 600;
        }

        .banner-description {
            font-size: 1rem;
            max-width: 600px;
        }

        .banner-nav {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            background: rgba(255,255,255,0.2);
            color: var(--light);
            border: none;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: background 0.3s;
            backdrop-filter: blur(5px);
        }

        .banner-nav:hover {
            background: rgba(255,255,255,0.3);
        }

        .banner-prev {
            left: 1rem;
        }

        .banner-next {
            right: 1rem;
        }

        .banner-dots {
            position: absolute;
            bottom: 1rem;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            gap: 0.5rem;
        }

        .banner-dot {
            width: 10px;
            height: 10px;
            border-radius: 50%;
            background: rgba(255,255,255,0.5);
            cursor: pointer;
            transition: background 0.3s;
        }

        .banner-dot.active {
            background: var(--light);
        }

        /* Publishers Section */
        .publishers-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            gap: 1.5rem;
        }

        .publisher-card {
            background: var(--light);
            border-radius: 12px;
            padding: 1.5rem;
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
            box-shadow: 0 2px 15px rgba(0,0,0,0.04);
            transition: transform 0.3s, box-shadow 0.3s;
            cursor: pointer;
            border: 1px solid var(--border);
        }

        .publisher-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.1);
        }

        .publisher-logo {
            width: 80px;
            height: 80px;
            object-fit: contain;
            margin-bottom: 1rem;
            border-radius: 8px;
            background: var(--primary-light);
            padding: 0.5rem;
        }

        .publisher-name {
            font-weight: 600;
            margin-bottom: 0.25rem;
        }

        .publisher-discount {
            font-size: 0.875rem;
            color: var(--success);
        }

        /* Footer */
        footer {
            background: var(--primary-dark);
            color: var(--light);
            padding: 3rem 0 1.5rem;
        }

        .footer-content {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 2rem;
            margin-bottom: 2rem;
        }

        .footer-column h3 {
            font-family: var(--heading-font);
            font-size: 1.2rem;
            margin-bottom: 1.5rem;
            font-weight: 600;
        }

        .footer-links {
            list-style: none;
        }

        .footer-links li {
            margin-bottom: 0.75rem;
        }

        .footer-links a {
            color: rgba(255,255,255,0.7);
            text-decoration: none;
            transition: color 0.2s;
        }

        .footer-links a:hover {
            color: var(--light);
        }

        .footer-bottom {
            text-align: center;
            padding-top: 1.5rem;
            border-top: 1px solid rgba(255,255,255,0.1);
            color: rgba(255,255,255,0.7);
            font-size: 0.9rem;
        }

        /* Modal Styles */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            z-index: 1000;
            backdrop-filter: blur(5px);
            overflow-y: auto;
        }

        .modal-content {
            background: var(--light);
            margin: 2% auto;
            padding: 2rem;
            border-radius: 12px;
            width: 95%;
            max-width: 1000px;
            max-height: 90vh;
            overflow-y: auto;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            animation: modalSlideIn 0.3s ease;
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
            padding-bottom: 1rem;
            border-bottom: 1px solid var(--border);
        }

        .modal-header h2 {
            font-family: var(--heading-font);
            font-weight: 600;
            border: none;
            padding: 0;
            margin: 0;
        }

        .close-modal {
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: #6c757d;
            padding: 0.5rem;
            border-radius: 6px;
            transition: all 0.2s ease;
        }

        .close-modal:hover {
            background: var(--primary-light);
            color: var(--dark);
        }

        .book-detail-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 2rem;
        }

        .book-detail-image {
            width: 100%;
            border-radius: 12px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }

        .book-detail-info h3 {
            font-family: var(--heading-font);
            font-size: 1.5rem;
            margin-bottom: 0.5rem;
            color: var(--primary);
        }

        .book-detail-meta {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 1rem;
            margin: 1.5rem 0;
        }

        .book-detail-meta-item {
            display: flex;
            flex-direction: column;
        }

        .meta-label {
            font-size: 0.875rem;
            color: #6c757d;
            margin-bottom: 0.25rem;
        }

        .meta-value {
            font-weight: 500;
        }

        .book-detail-price {
            background: var(--primary-light);
            padding: 1.5rem;
            border-radius: 12px;
            margin: 1.5rem 0;
            border: 1px solid var(--border);
        }

        .price-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 0.75rem;
            padding-bottom: 0.75rem;
            border-bottom: 1px solid rgba(0,0,0,0.1);
        }

        .price-label {
            font-weight: 500;
        }

        .price-value {
            font-weight: 600;
        }

        .discounted-price {
            color: var(--danger);
            font-size: 1.2rem;
        }

        .order-form {
            margin-top: 2rem;
        }

        .form-group {
            margin-bottom: 1.5rem;
        }

        .form-group label {
            display: block;
            font-weight: 600;
            margin-bottom: 0.5rem;
            color: var(--dark);
        }

        .form-group input,
        .form-group select,
        .form-group textarea {
            width: 100%;
            padding: 0.75rem 1rem;
            border: 1px solid var(--border);
            border-radius: 8px;
            font-size: 1rem;
            transition: all 0.3s ease;
            font-family: var(--font-family);
        }

        .form-group input:focus,
        .form-group select:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(30, 136, 229, 0.1);
        }

        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1rem;
        }

        .form-actions {
            display: flex;
            gap: 1rem;
            margin-top: 2rem;
        }

        .location-actions {
            display: flex;
            gap: 0.5rem;
            margin-top: 0.5rem;
        }

        .btn-location {
            background: var(--primary-light);
            color: var(--primary);
            border: 1px solid var(--primary);
            padding: 0.5rem 1rem;
            border-radius: 6px;
            font-size: 0.875rem;
            cursor: pointer;
            transition: all 0.2s;
        }

        .btn-location:hover {
            background: var(--primary);
            color: var(--light);
        }

        .whatsapp-options {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1rem;
            margin-top: 1.5rem;
        }

        .whatsapp-option {
            background: var(--primary-light);
            border: 2px solid var(--border);
            border-radius: 12px;
            padding: 1.5rem;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
        }

        .whatsapp-option:hover {
            border-color: var(--primary);
            transform: translateY(-2px);
        }

        .whatsapp-option.selected {
            border-color: var(--success);
            background: rgba(67, 160, 71, 0.1);
        }

        .whatsapp-option h4 {
            margin-bottom: 0.5rem;
            color: var(--primary);
        }

        .whatsapp-option p {
            font-size: 0.9rem;
            margin-bottom: 1rem;
            color: #6c757d;
        }

        .whatsapp-number {
            font-weight: 600;
            color: var(--success);
            margin-bottom: 1rem;
        }

        .location-permission {
            background: var(--warning);
            color: var(--light);
            padding: 1rem;
            border-radius: 8px;
            margin-bottom: 1rem;
            text-align: center;
        }

        /* Responsive Styles */
        @media (max-width: 1024px) {
            .book-detail-grid {
                grid-template-columns: 1fr;
            }
            
            .nav-links {
                gap: 1.5rem;
            }
            
            .search-bar {
                width: 250px;
            }
            
            .whatsapp-options {
                grid-template-columns: 1fr;
            }
        }

        @media (max-width: 768px) {
            .top-banner-content {
                flex-direction: column;
                gap: 0.5rem;
            }
            
            .top-banner .close-banner {
                position: static;
                transform: none;
                margin-top: 0.5rem;
            }
            
            .header-top {
                flex-direction: column;
                gap: 1rem;
                text-align: center;
            }
            
            .nav-main {
                flex-direction: column;
                gap: 1rem;
            }
            
            .nav-links {
                flex-wrap: wrap;
                justify-content: center;
            }
            
            .search-bar {
                width: 100%;
                max-width: 400px;
            }
            
            .contact-info {
                flex-direction: column;
                text-align: center;
            }
            
            .hero h1 {
                font-size: 2rem;
            }
            
            .hero p {
                font-size: 1rem;
            }
            
            .banner-image {
                height: 300px;
            }
            
            .banner-content {
                padding: 1.5rem;
            }
            
            .banner-title {
                font-size: 1.5rem;
            }
            
            .form-row {
                grid-template-columns: 1fr;
            }
            
            .form-actions {
                flex-direction: column;
            }
        }

        @media (max-width: 480px) {
            .hero {
                padding: 2.5rem 0;
            }
            
            .hero h1 {
                font-size: 1.8rem;
            }
            
            .section-title {
                font-size: 1.5rem;
            }
            
            .categories-grid,
            .books-grid,
            .publishers-grid {
                grid-template-columns: 1fr;
            }
            
            .modal-content {
                padding: 1.5rem;
                margin: 5% auto;
                width: 98%;
            }
        }

        @keyframes modalSlideIn {
            from { opacity: 0; transform: translateY(-50px) scale(0.9); }
            to { opacity: 1; transform: translateY(0) scale(1); }
        }

        .loading {
            text-align: center;
            padding: 2rem;
            color: #6c757d;
            font-style: italic;
        }
    </style>
</head>
<body>
    <!-- Top Banner -->
    <div class="top-banner" id="topBanner">
        <div class="container">
            <div class="top-banner-content">
                <span data-lang-key="top-banner-text">üöÄ Diskon spesial hingga 30% untuk semua buku! Penawaran terbatas.</span>
                <button class="close-banner" id="closeBanner">&times;</button>
            </div>
        </div>
    </div>

    <!-- Header -->
    <header>
        <div class="container">
            <div class="header-top">
                <div class="logo">
                    <img src="https://via.placeholder.com/40x40?text=TB" alt="Toko Buku Islam">
                    <h1 data-lang-key="site-title">Toko Buku Islam</h1>
                </div>
                <div class="header-actions">
                    <div class="language-selector">
                        <button class="language-btn" id="languageBtn">
                            <span id="currentLangFlag">üáÆüá©</span>
                            <span id="currentLangText">Indonesia</span>
                            <span>‚ñº</span>
                        </button>
                        <div class="language-dropdown" id="languageDropdown">
                            <div class="language-option active" data-lang="id">
                                <span>üáÆüá©</span>
                                <span>Indonesia</span>
                            </div>
                            <div class="language-option" data-lang="en">
                                <span>üá¨üáß</span>
                                <span>English</span>
                            </div>
                            <div class="language-option" data-lang="ar">
                                <span>üá∏üá¶</span>
                                <span>ÿßŸÑÿπÿ±ÿ®Ÿäÿ©</span>
                            </div>
                        </div>
                    </div>
                    <div class="currency-selector">
                        <button class="currency-btn" id="currencyBtn">
                            <span id="currentCurrencySymbol">IDR</span>
                            <span>‚ñº</span>
                        </button>
                        <div class="currency-dropdown" id="currencyDropdown">
                            <div class="currency-option active" data-currency="IDR">
                                <span>IDR</span>
                                <span>Rupiah Indonesia</span>
                            </div>
                            <div class="currency-option" data-currency="USD">
                                <span>USD</span>
                                <span>US Dollar</span>
                            </div>
                            <div class="currency-option" data-currency="EGP">
                                <span>EGP</span>
                                <span>Egyptian Pound</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="nav-main">
                <nav class="nav-links">
                    <a href="#" class="nav-link active" data-lang-key="nav-home">Beranda</a>
                    <a href="#" class="nav-link" data-lang-key="nav-books">Buku</a>
                    <a href="#" class="nav-link" data-lang-key="nav-categories">Kategori</a>
                    <a href="#" class="nav-link" data-lang-key="nav-publishers">Penerbit</a>
                    <a href="#" class="nav-link" data-lang-key="nav-about">Tentang Kami</a>
                    <a href="#" class="nav-link" data-lang-key="nav-contact">Kontak</a>
                </nav>
                <div class="search-bar">
                    <input type="text" placeholder="Cari buku..." data-lang-key="search-placeholder">
                    <button data-lang-key="search-button">üîç</button>
                </div>
            </div>
        </div>
        
        <!-- Contact Info Bar -->
        <div class="contact-bar">
            <div class="container">
                <div class="contact-info">
                    <div class="contact-item">
                        <span>üìû</span>
                        <span data-lang-key="contact-phone">Telepon: <strong id="contactPhone">+62 812 3456 7890</strong></span>
                    </div>
                    <div class="contact-item">
                        <span>üìß</span>
                        <span data-lang-key="contact-email">Email: <strong id="contactEmail">info@tokobukuislam.com</strong></span>
                    </div>
                    <div class="contact-item">
                        <span>üìç</span>
                        <span data-lang-key="contact-address">Alamat: <strong id="contactAddress">Jl. Contoh No. 123, Jakarta, Indonesia</strong></span>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Hero Section -->
    <section class="hero">
        <div class="container">
            <h1 data-lang-key="hero-title">Temukan Buku Berkualitas untuk Kehidupan Islami</h1>
            <p data-lang-key="hero-description">Jelajahi koleksi buku Islam terbaik dari berbagai penerbit ternama. Dapatkan pengetahuan dan inspirasi untuk memperkaya kehidupan spiritual Anda.</p>
            <div class="hero-buttons">
                <button class="btn btn-primary" data-lang-key="hero-btn-books">Jelajahi Buku</button>
                <button class="btn btn-secondary" data-lang-key="hero-btn-categories">Lihat Kategori</button>
            </div>
        </div>
    </section>

    <!-- Main Content -->
    <main class="container">
        <!-- Banner Section -->
        <section class="section banner-section">
            <div class="banner-slider" id="bannerSlider">
                <div class="banner-slide active">
                    <img src="https://via.placeholder.com/1200x400?text=Banner+1" alt="Banner 1" class="banner-image">
                    <div class="banner-content">
                        <h2 class="banner-title" data-lang-key="banner1-title">Diskon Spesial Ramadan</h2>
                        <p class="banner-description" data-lang-key="banner1-description">Dapatkan diskon hingga 30% untuk semua buku selama bulan Ramadan. Penawaran terbatas!</p>
                    </div>
                </div>
                <div class="banner-slide">
                    <img src="https://via.placeholder.com/1200x400?text=Banner+2" alt="Banner 2" class="banner-image">
                    <div class="banner-content">
                        <h2 class="banner-title" data-lang-key="banner2-title">Buku Baru Tersedia</h2>
                        <p class="banner-description" data-lang-key="banner2-description">Temukan koleksi buku terbaru dari penerbit ternama. Update pengetahuan Anda dengan bacaan berkualitas.</p>
                    </div>
                </div>
                <div class="banner-slide">
                    <img src="https://via.placeholder.com/1200x400?text=Banner+3" alt="Banner 3" class="banner-image">
                    <div class="banner-content">
                        <h2 class="banner-title" data-lang-key="banner3-title">Gratis Ongkir</h2>
                        <p class="banner-description" data-lang-key="banner3-description">Gratis ongkos kirim untuk pembelian di atas Rp 500.000. Berlaku untuk seluruh Indonesia.</p>
                    </div>
                </div>
                <button class="banner-nav banner-prev">‚ùÆ</button>
                <button class="banner-nav banner-next">‚ùØ</button>
                <div class="banner-dots">
                    <span class="banner-dot active"></span>
                    <span class="banner-dot"></span>
                    <span class="banner-dot"></span>
                </div>
            </div>
        </section>

        <!-- Categories Section -->
        <section class="section">
            <div class="section-header">
                <h2 class="section-title" data-lang-key="categories-title">Kategori Buku</h2>
                <a href="#" class="view-all" data-lang-key="view-all">Lihat Semua</a>
            </div>
            <div class="categories-grid" id="categoriesGrid">
                <div class="loading" data-lang-key="loading-categories">Memuat kategori...</div>
            </div>
        </section>

        <!-- Featured Books Section -->
        <section class="section">
            <div class="section-header">
                <h2 class="section-title" data-lang-key="featured-books-title">Buku Unggulan</h2>
                <a href="#" class="view-all" data-lang-key="view-all">Lihat Semua</a>
            </div>
            <div class="books-grid" id="featuredBooksGrid">
                <div class="loading" data-lang-key="loading-books">Memuat buku...</div>
            </div>
        </section>

        <!-- All Books Section -->
        <section class="section">
            <div class="section-header">
                <h2 class="section-title" data-lang-key="all-books-title">Semua Buku</h2>
            </div>
            <div class="books-grid" id="allBooksGrid">
                <div class="loading" data-lang-key="loading-books">Memuat buku...</div>
            </div>
        </section>

        <!-- Publishers Section -->
        <section class="section">
            <div class="section-header">
                <h2 class="section-title" data-lang-key="publishers-title">Penerbit Kami</h2>
                <a href="#" class="view-all" data-lang-key="view-all">Lihat Semua</a>
            </div>
            <div class="publishers-grid" id="publishersGrid">
                <div class="loading" data-lang-key="loading-publishers">Memuat penerbit...</div>
            </div>
        </section>
    </main>

    <!-- Footer -->
    <footer>
        <div class="container">
            <div class="footer-content">
                <div class="footer-column">
                    <h3 data-lang-key="footer-about">Tentang Kami</h3>
                    <p data-lang-key="footer-about-text">Toko Buku Islam adalah platform terpercaya untuk mendapatkan buku-buku Islam berkualitas dari berbagai penerbit ternama. Kami berkomitmen untuk menyediakan literatur Islami yang dapat memperkaya pengetahuan spiritual Anda.</p>
                </div>
                <div class="footer-column">
                    <h3 data-lang-key="footer-links">Tautan Cepat</h3>
                    <ul class="footer-links">
                        <li><a href="#" data-lang-key="nav-home">Beranda</a></li>
                        <li><a href="#" data-lang-key="nav-books">Buku</a></li>
                        <li><a href="#" data-lang-key="nav-categories">Kategori</a></li>
                        <li><a href="#" data-lang-key="nav-publishers">Penerbit</a></li>
                        <li><a href="#" data-lang-key="nav-about">Tentang Kami</a></li>
                        <li><a href="#" data-lang-key="nav-contact">Kontak</a></li>
                    </ul>
                </div>
                <div class="footer-column">
                    <h3 data-lang-key="footer-contact">Kontak Kami</h3>
                    <ul class="footer-links">
                        <li data-lang-key="footer-address">Jl. Contoh No. 123, Jakarta, Indonesia</li>
                        <li data-lang-key="footer-phone">+62 812 3456 7890</li>
                        <li data-lang-key="footer-email">info@tokobukuislam.com</li>
                    </ul>
                </div>
            </div>
            <div class="footer-bottom">
                <p data-lang-key="footer-copyright">&copy; 2023 Toko Buku Islam. Semua hak dilindungi.</p>
            </div>
        </div>
    </footer>

    <!-- Book Detail Modal -->
    <div id="bookDetailModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 data-lang-key="book-detail-title">Detail Buku</h2>
                <button class="close-modal" data-modal="bookDetailModal">&times;</button>
            </div>
            <div class="book-detail-grid">
                <div>
                    <img id="detailBookImage" src="" alt="Book Cover" class="book-detail-image">
                </div>
                <div class="book-detail-info">
                    <h3 id="detailBookTitle">Judul Buku</h3>
                    <p id="detailBookAuthor" class="book-author">Penulis</p>
                    
                    <div class="book-detail-meta">
                        <div class="book-detail-meta-item">
                            <span class="meta-label" data-lang-key="book-publisher">Penerbit</span>
                            <span class="meta-value" id="detailBookPublisher">-</span>
                        </div>
                        <div class="book-detail-meta-item">
                            <span class="meta-label" data-lang-key="book-category">Kategori</span>
                            <span class="meta-value" id="detailBookCategory">-</span>
                        </div>
                        <div class="book-detail-meta-item">
                            <span class="meta-label" data-lang-key="book-year">Tahun Terbit</span>
                            <span class="meta-value" id="detailBookYear">-</span>
                        </div>
                        <div class="book-detail-meta-item">
                            <span class="meta-label" data-lang-key="book-pages">Halaman</span>
                            <span class="meta-value" id="detailBookPages">-</span>
                        </div>
                        <div class="book-detail-meta-item">
                            <span class="meta-label" data-lang-key="book-cover-type">Jenis Cover</span>
                            <span class="meta-value" id="detailBookCoverType">-</span>
                        </div>
                        <div class="book-detail-meta-item">
                            <span class="meta-label" data-lang-key="book-paper-type">Jenis Kertas</span>
                            <span class="meta-value" id="detailBookPaperType">-</span>
                        </div>
                        <div class="book-detail-meta-item">
                            <span class="meta-label" data-lang-key="book-weight">Berat</span>
                            <span class="meta-value" id="detailBookWeight">-</span>
                        </div>
                        <div class="book-detail-meta-item">
                            <span class="meta-label" data-lang-key="book-volumes">Jilid</span>
                            <span class="meta-value" id="detailBookVolumes">-</span>
                        </div>
                    </div>
                    
                    <div class="book-detail-price">
                        <div class="price-row">
                            <span class="price-label" data-lang-key="price-base">Harga Dasar</span>
                            <span class="price-value" id="detailBasePrice">-</span>
                        </div>
                        <div class="price-row">
                            <span class="price-label" data-lang-key="price-discount">Diskon</span>
                            <span class="price-value" id="detailDiscount">-</span>
                        </div>
                        <div class="price-row">
                            <span class="price-label" data-lang-key="price-final">Harga Akhir</span>
                            <span class="price-value discounted-price" id="detailFinalPrice">-</span>
                        </div>
                    </div>
                    
                    <p id="detailBookDescription" class="book-description">Deskripsi buku akan ditampilkan di sini.</p>
                    
                    <div class="form-actions">
                        <button class="btn btn-primary" id="orderBookBtn" data-lang-key="order-book-btn">Pesan Buku Ini</button>
                        <button class="btn btn-secondary" data-modal="bookDetailModal" data-lang-key="close-btn">Tutup</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Order Form Modal -->
    <div id="orderFormModal" class="modal">
        <div class="modal-content" style="max-width: 800px;">
            <div class="modal-header">
                <h2 data-lang-key="order-form-title">Form Pemesanan Buku</h2>
                <button class="close-modal" data-modal="orderFormModal">&times;</button>
            </div>
            <form id="orderForm">
                <input type="hidden" id="orderBookId">
                <input type="hidden" id="orderBookTitle">
                
                <div class="order-book-info" style="display: flex; gap: 1.5rem; margin-bottom: 2rem; padding: 1rem; background: var(--primary-light); border-radius: 8px;">
                    <img id="orderBookImage" src="" alt="Book Cover" style="width: 100px; height: 120px; object-fit: cover; border-radius: 8px;">
                    <div>
                        <h3 id="orderBookTitleText" style="margin-bottom: 0.5rem;"></h3>
                        <p id="orderBookAuthorText" style="color: #6c757d; margin-bottom: 0.5rem;"></p>
                        <p id="orderBookPriceText" class="discounted-price" style="font-weight: 600; font-size: 1.1rem;"></p>
                    </div>
                </div>
                
                <div class="location-permission" id="locationPermission" style="display: none;">
                    <p data-lang-key="location-permission-text">Izinkan akses lokasi untuk mengisi alamat otomatis</p>
                    <button type="button" class="btn btn-warning" id="allowLocation" data-lang-key="allow-location">Izinkan Lokasi</button>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="customerName" data-lang-key="order-form-name">Nama Lengkap</label>
                        <input type="text" id="customerName" required>
                    </div>
                    <div class="form-group">
                        <label for="customerEmail" data-lang-key="order-form-email">Email</label>
                        <input type="email" id="customerEmail" required>
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="customerPhone" data-lang-key="order-form-phone">Nomor Telepon</label>
                        <input type="tel" id="customerPhone" required>
                    </div>
                    <div class="form-group">
                        <label for="orderQuantity" data-lang-key="order-form-quantity">Jumlah</label>
                        <input type="number" id="orderQuantity" min="1" value="1" required>
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="customerAddress" data-lang-key="order-form-address">Alamat Lengkap</label>
                    <textarea id="customerAddress" rows="3" required></textarea>
                    <div class="location-actions">
                        <button type="button" class="btn-location" id="detectLocation" data-lang-key="detect-location">
                            üìç Deteksi Lokasi Otomatis
                        </button>
                        <button type="button" class="btn-location" id="viewOnMap" data-lang-key="view-on-map" style="display: none;">
                            üó∫Ô∏è Lihat di Google Maps
                        </button>
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="orderNotes" data-lang-key="order-form-notes">Catatan (opsional)</label>
                    <textarea id="orderNotes" rows="2"></textarea>
                </div>
                
                <div class="order-summary" style="background: var(--primary-light); padding: 1.5rem; border-radius: 8px; margin: 1.5rem 0;">
                    <h3 style="margin-bottom: 1rem;" data-lang-key="order-summary-title">Ringkasan Pesanan</h3>
                    <div class="price-row">
                        <span class="price-label" data-lang-key="order-summary-item">Item</span>
                        <span class="price-value" id="summaryItem">-</span>
                    </div>
                    <div class="price-row">
                        <span class="price-label" data-lang-key="order-summary-quantity">Jumlah</span>
                        <span class="price-value" id="summaryQuantity">1</span>
                    </div>
                    <div class="price-row">
                        <span class="price-label" data-lang-key="order-summary-price">Harga Satuan</span>
                        <span class="price-value" id="summaryUnitPrice">-</span>
                    </div>
                    <div class="price-row" style="border-top: 2px solid var(--border); padding-top: 1rem;">
                        <span class="price-label" style="font-weight: 600;" data-lang-key="order-summary-total">Total</span>
                        <span class="price-value discounted-price" style="font-size: 1.2rem;" id="summaryTotalPrice">-</span>
                    </div>
                </div>
                
                <div class="whatsapp-options" id="whatsappOptions">
                    <div class="whatsapp-option" data-option="indonesia">
                        <h4 data-lang-key="whatsapp-indonesia">WhatsApp Indonesia</h4>
                        <p data-lang-key="whatsapp-indonesia-desc">Kirim pesan ke nomor WhatsApp Indonesia untuk pemesanan dalam negeri</p>
                        <div class="whatsapp-number" id="whatsappIndonesiaNumber">+62 812 3456 7890</div>
                        <button type="button" class="btn btn-success" data-lang-key="confirm-order">Konfirmasi via WhatsApp</button>
                    </div>
                    <div class="whatsapp-option" data-option="arab">
                        <h4 data-lang-key="whatsapp-arab">WhatsApp Arab</h4>
                        <p data-lang-key="whatsapp-arab-desc">Kirim pesan ke nomor WhatsApp Arab untuk pemesanan internasional</p>
                        <div class="whatsapp-number" id="whatsappArabNumber">+966 123 456 789</div>
                        <button type="button" class="btn btn-success" data-lang-key="confirm-order">Konfirmasi via WhatsApp</button>
                    </div>
                </div>
                
                <div class="form-actions">
                    <button type="button" class="btn btn-secondary" data-modal="orderFormModal" data-lang-key="cancel-btn">Batal</button>
                </div>
            </form>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script>
        // ==================== KONFIGURASI BAHASA ====================
        const translations = {
            id: {
                "top-banner-text": "üöÄ Diskon spesial hingga 30% untuk semua buku! Penawaran terbatas.",
                "site-title": "Toko Buku Islam",
                "nav-home": "Beranda",
                "nav-books": "Buku",
                "nav-categories": "Kategori",
                "nav-publishers": "Penerbit",
                "nav-about": "Tentang Kami",
                "nav-contact": "Kontak",
                "search-placeholder": "Cari buku...",
                "search-button": "Cari",
                "contact-phone": "Telepon:",
                "contact-email": "Email:",
                "contact-address": "Alamat:",
                "hero-title": "Temukan Buku Berkualitas untuk Kehidupan Islami",
                "hero-description": "Jelajahi koleksi buku Islam terbaik dari berbagai penerbit ternama. Dapatkan pengetahuan dan inspirasi untuk memperkaya kehidupan spiritual Anda.",
                "hero-btn-books": "Jelajahi Buku",
                "hero-btn-categories": "Lihat Kategori",
                "banner1-title": "Diskon Spesial Ramadan",
                "banner1-description": "Dapatkan diskon hingga 30% untuk semua buku selama bulan Ramadan. Penawaran terbatas!",
                "banner2-title": "Buku Baru Tersedia",
                "banner2-description": "Temukan koleksi buku terbaru dari penerbit ternama. Update pengetahuan Anda dengan bacaan berkualitas.",
                "banner3-title": "Gratis Ongkir",
                "banner3-description": "Gratis ongkos kirim untuk pembelian di atas Rp 500.000. Berlaku untuk seluruh Indonesia.",
                "categories-title": "Kategori Buku",
                "view-all": "Lihat Semua",
                "featured-books-title": "Buku Unggulan",
                "all-books-title": "Semua Buku",
                "publishers-title": "Penerbit Kami",
                "loading-categories": "Memuat kategori...",
                "loading-books": "Memuat buku...",
                "loading-publishers": "Memuat penerbit...",
                "book-title": "Judul",
                "book-author": "Penulis",
                "book-publisher": "Penerbit",
                "book-category": "Kategori",
                "book-year": "Tahun Terbit",
                "book-pages": "Halaman",
                "book-cover-type": "Jenis Cover",
                "book-paper-type": "Jenis Kertas",
                "book-weight": "Berat",
                "book-volumes": "Jilid",
                "price-base": "Harga Dasar",
                "price-discount": "Diskon",
                "price-final": "Harga Akhir",
                "order-book-btn": "Pesan Buku Ini",
                "close-btn": "Tutup",
                "book-detail-title": "Detail Buku",
                "order-form-title": "Form Pemesanan Buku",
                "order-form-name": "Nama Lengkap",
                "order-form-email": "Email",
                "order-form-phone": "Nomor Telepon",
                "order-form-address": "Alamat Lengkap",
                "order-form-quantity": "Jumlah",
                "order-form-notes": "Catatan (opsional)",
                "order-form-submit": "Konfirmasi Pesanan",
                "cancel-btn": "Batal",
                "order-summary-title": "Ringkasan Pesanan",
                "order-summary-item": "Item",
                "order-summary-quantity": "Jumlah",
                "order-summary-price": "Harga Satuan",
                "order-summary-total": "Total",
                "detect-location": "üìç Deteksi Lokasi Otomatis",
                "view-on-map": "üó∫Ô∏è Lihat di Google Maps",
                "location-permission-text": "Izinkan akses lokasi untuk mengisi alamat otomatis",
                "allow-location": "Izinkan Lokasi",
                "whatsapp-indonesia": "WhatsApp Indonesia",
                "whatsapp-indonesia-desc": "Kirim pesan ke nomor WhatsApp Indonesia untuk pemesanan dalam negeri",
                "whatsapp-arab": "WhatsApp Arab",
                "whatsapp-arab-desc": "Kirim pesan ke nomor WhatsApp Arab untuk pemesanan internasional",
                "confirm-order": "Konfirmasi via WhatsApp",
                "footer-about": "Tentang Kami",
                "footer-about-text": "Toko Buku Islam adalah platform terpercaya untuk mendapatkan buku-buku Islam berkualitas dari berbagai penerbit ternama. Kami berkomitmen untuk menyediakan literatur Islami yang dapat memperkaya pengetahuan spiritual Anda.",
                "footer-links": "Tautan Cepat",
                "footer-contact": "Kontak Kami",
                "footer-address": "Jl. Contoh No. 123, Jakarta, Indonesia",
                "footer-phone": "+62 812 3456 7890",
                "footer-email": "info@tokobukuislam.com",
                "footer-copyright": "¬© 2023 Toko Buku Islam. Semua hak dilindungi."
            },
            en: {
                "top-banner-text": "üöÄ Special discount up to 30% on all books! Limited offer.",
                "site-title": "Islamic Book Store",
                "nav-home": "Home",
                "nav-books": "Books",
                "nav-categories": "Categories",
                "nav-publishers": "Publishers",
                "nav-about": "About Us",
                "nav-contact": "Contact",
                "search-placeholder": "Search books...",
                "search-button": "Search",
                "contact-phone": "Phone:",
                "contact-email": "Email:",
                "contact-address": "Address:",
                "hero-title": "Find Quality Books for Islamic Life",
                "hero-description": "Explore the best collection of Islamic books from various reputable publishers. Gain knowledge and inspiration to enrich your spiritual life.",
                "hero-btn-books": "Explore Books",
                "hero-btn-categories": "View Categories",
                "banner1-title": "Special Ramadan Discount",
                "banner1-description": "Get up to 30% discount on all books during Ramadan. Limited offer!",
                "banner2-title": "New Books Available",
                "banner2-description": "Discover the latest collection from leading publishers. Update your knowledge with quality reading.",
                "banner3-title": "Free Shipping",
                "banner3-description": "Free shipping for purchases above Rp 500,000. Applies to all of Indonesia.",
                "categories-title": "Book Categories",
                "view-all": "View All",
                "featured-books-title": "Featured Books",
                "all-books-title": "All Books",
                "publishers-title": "Our Publishers",
                "loading-categories": "Loading categories...",
                "loading-books": "Loading books...",
                "loading-publishers": "Loading publishers...",
                "book-title": "Title",
                "book-author": "Author",
                "book-publisher": "Publisher",
                "book-category": "Category",
                "book-year": "Publication Year",
                "book-pages": "Pages",
                "book-cover-type": "Cover Type",
                "book-paper-type": "Paper Type",
                "book-weight": "Weight",
                "book-volumes": "Volumes",
                "price-base": "Base Price",
                "price-discount": "Discount",
                "price-final": "Final Price",
                "order-book-btn": "Order This Book",
                "close-btn": "Close",
                "book-detail-title": "Book Details",
                "order-form-title": "Book Order Form",
                "order-form-name": "Full Name",
                "order-form-email": "Email",
                "order-form-phone": "Phone Number",
                "order-form-address": "Full Address",
                "order-form-quantity": "Quantity",
                "order-form-notes": "Notes (optional)",
                "order-form-submit": "Confirm Order",
                "cancel-btn": "Cancel",
                "order-summary-title": "Order Summary",
                "order-summary-item": "Item",
                "order-summary-quantity": "Quantity",
                "order-summary-price": "Unit Price",
                "order-summary-total": "Total",
                "detect-location": "üìç Auto Detect Location",
                "view-on-map": "üó∫Ô∏è View on Google Maps",
                "location-permission-text": "Allow location access to auto-fill address",
                "allow-location": "Allow Location",
                "whatsapp-indonesia": "WhatsApp Indonesia",
                "whatsapp-indonesia-desc": "Send message to Indonesian WhatsApp number for domestic orders",
                "whatsapp-arab": "WhatsApp Arab",
                "whatsapp-arab-desc": "Send message to Arab WhatsApp number for international orders",
                "confirm-order": "Confirm via WhatsApp",
                "footer-about": "About Us",
                "footer-about-text": "Islamic Book Store is a trusted platform to get quality Islamic books from various reputable publishers. We are committed to providing Islamic literature that can enrich your spiritual knowledge.",
                "footer-links": "Quick Links",
                "footer-contact": "Contact Us",
                "footer-address": "Example St. No. 123, Jakarta, Indonesia",
                "footer-phone": "+62 812 3456 7890",
                "footer-email": "info@islamicbookstore.com",
                "footer-copyright": "¬© 2023 Islamic Book Store. All rights reserved."
            },
            ar: {
                "top-banner-text": "üöÄ ÿÆÿµŸÖ ÿÆÿßÿµ ŸäÿµŸÑ ÿ•ŸÑŸâ 30Ÿ™ ÿπŸÑŸâ ÿ¨ŸÖŸäÿπ ÿßŸÑŸÉÿ™ÿ®! ÿπÿ±ÿ∂ ŸÖÿ≠ÿØŸàÿØ.",
                "site-title": "ŸÖÿ™ÿ¨ÿ± ÿßŸÑŸÉÿ™ÿ® ÿßŸÑÿ•ÿ≥ŸÑÿßŸÖŸäÿ©",
                "nav-home": "ÿßŸÑÿ±ÿ¶Ÿäÿ≥Ÿäÿ©",
                "nav-books": "ÿßŸÑŸÉÿ™ÿ®",
                "nav-categories": "ÿßŸÑŸÅÿ¶ÿßÿ™",
                "nav-publishers": "ÿßŸÑŸÜÿßÿ¥ÿ±ŸàŸÜ",
                "nav-about": "ŸÖŸÜ ŸÜÿ≠ŸÜ",
                "nav-contact": "ÿßÿ™ÿµŸÑ ÿ®ŸÜÿß",
                "search-placeholder": "ÿßÿ®ÿ≠ÿ´ ÿπŸÜ ŸÉÿ™ÿ®...",
                "search-button": "ÿ®ÿ≠ÿ´",
                "contact-phone": "Ÿáÿßÿ™ŸÅ:",
                "contact-email": "ÿ®ÿ±ŸäÿØ ÿ•ŸÑŸÉÿ™ÿ±ŸàŸÜŸä:",
                "contact-address": "ÿπŸÜŸàÿßŸÜ:",
                "hero-title": "ÿßÿ®ÿ≠ÿ´ ÿπŸÜ ŸÉÿ™ÿ® ÿπÿßŸÑŸäÿ© ÿßŸÑÿ¨ŸàÿØÿ© ŸÑŸÑÿ≠Ÿäÿßÿ© ÿßŸÑÿ•ÿ≥ŸÑÿßŸÖŸäÿ©",
                "hero-description": "ÿßÿ≥ÿ™ŸÉÿ¥ŸÅ ÿ£ŸÅÿ∂ŸÑ ŸÖÿ¨ŸÖŸàÿπÿ© ŸÖŸÜ ÿßŸÑŸÉÿ™ÿ® ÿßŸÑÿ•ÿ≥ŸÑÿßŸÖŸäÿ© ŸÖŸÜ ŸÖÿÆÿ™ŸÑŸÅ ÿßŸÑŸÜÿßÿ¥ÿ±ŸäŸÜ ÿßŸÑŸÖŸàÿ´ŸàŸÇŸäŸÜ. ÿßŸÉÿ™ÿ≥ÿ® ÿßŸÑŸÖÿπÿ±ŸÅÿ© ŸàÿßŸÑÿ•ŸÑŸáÿßŸÖ ŸÑÿ•ÿ´ÿ±ÿßÿ° ÿ≠Ÿäÿßÿ™ŸÉ ÿßŸÑÿ±Ÿàÿ≠Ÿäÿ©.",
                "hero-btn-books": "ÿßÿ≥ÿ™ŸÉÿ¥ŸÅ ÿßŸÑŸÉÿ™ÿ®",
                "hero-btn-categories": "ÿπÿ±ÿ∂ ÿßŸÑŸÅÿ¶ÿßÿ™",
                "banner1-title": "ÿÆÿµŸÖ ÿÆÿßÿµ ŸÑÿ±ŸÖÿ∂ÿßŸÜ",
                "banner1-description": "ÿßÿ≠ÿµŸÑ ÿπŸÑŸâ ÿÆÿµŸÖ ŸäÿµŸÑ ÿ•ŸÑŸâ 30Ÿ™ ÿπŸÑŸâ ÿ¨ŸÖŸäÿπ ÿßŸÑŸÉÿ™ÿ® ÿÆŸÑÿßŸÑ ÿ¥Ÿáÿ± ÿ±ŸÖÿ∂ÿßŸÜ. ÿπÿ±ÿ∂ ŸÖÿ≠ÿØŸàÿØ!",
                "banner2-title": "ŸÉÿ™ÿ® ÿ¨ÿØŸäÿØÿ© ŸÖÿ™ÿßÿ≠ÿ©",
                "banner2-description": "ÿßŸÉÿ™ÿ¥ŸÅ ÿ£ÿ≠ÿØÿ´ ŸÖÿ¨ŸÖŸàÿπÿ© ŸÖŸÜ ÿßŸÑŸÜÿßÿ¥ÿ±ŸäŸÜ ÿßŸÑÿ±ÿßÿ¶ÿØŸäŸÜ. ŸÇŸÖ ÿ®ÿ™ÿ≠ÿØŸäÿ´ ŸÖÿπÿ±ŸÅÿ™ŸÉ ÿ®ÿßŸÑŸÇÿ±ÿßÿ°ÿ© ÿπÿßŸÑŸäÿ© ÿßŸÑÿ¨ŸàÿØÿ©.",
                "banner3-title": "ÿ¥ÿ≠ŸÜ ŸÖÿ¨ÿßŸÜŸä",
                "banner3-description": "ÿ¥ÿ≠ŸÜ ŸÖÿ¨ÿßŸÜŸä ŸÑŸÑÿ∑ŸÑÿ®ÿßÿ™ ÿßŸÑÿ™Ÿä ÿ™ÿ≤ŸäÿØ ÿπŸÜ 500,000 ÿ±Ÿàÿ®Ÿäÿ©. ŸäŸÜÿ∑ÿ®ŸÇ ÿπŸÑŸâ ÿ¨ŸÖŸäÿπ ÿ£ŸÜÿ≠ÿßÿ° ÿ•ŸÜÿØŸàŸÜŸäÿ≥Ÿäÿß.",
                "categories-title": "ŸÅÿ¶ÿßÿ™ ÿßŸÑŸÉÿ™ÿ®",
                "view-all": "ÿπÿ±ÿ∂ ÿßŸÑŸÉŸÑ",
                "featured-books-title": "ŸÉÿ™ÿ® ŸÖŸÖŸäÿ≤ÿ©",
                "all-books-title": "ÿ¨ŸÖŸäÿπ ÿßŸÑŸÉÿ™ÿ®",
                "publishers-title": "ŸÜÿßÿ¥ÿ±ŸàŸÜÿß",
                "loading-categories": "ÿ¨ÿßÿ±Ÿä ÿ™ÿ≠ŸÖŸäŸÑ ÿßŸÑŸÅÿ¶ÿßÿ™...",
                "loading-books": "ÿ¨ÿßÿ±Ÿä ÿ™ÿ≠ŸÖŸäŸÑ ÿßŸÑŸÉÿ™ÿ®...",
                "loading-publishers": "ÿ¨ÿßÿ±Ÿä ÿ™ÿ≠ŸÖŸäŸÑ ÿßŸÑŸÜÿßÿ¥ÿ±ŸäŸÜ...",
                "book-title": "ÿßŸÑÿπŸÜŸàÿßŸÜ",
                "book-author": "ÿßŸÑŸÖÿ§ŸÑŸÅ",
                "book-publisher": "ÿßŸÑŸÜÿßÿ¥ÿ±",
                "book-category": "ÿßŸÑŸÅÿ¶ÿ©",
                "book-year": "ÿ≥ŸÜÿ© ÿßŸÑŸÜÿ¥ÿ±",
                "book-pages": "ÿßŸÑÿµŸÅÿ≠ÿßÿ™",
                "book-cover-type": "ŸÜŸàÿπ ÿßŸÑÿ∫ŸÑÿßŸÅ",
                "book-paper-type": "ŸÜŸàÿπ ÿßŸÑŸàÿ±ŸÇ",
                "book-weight": "ÿßŸÑŸàÿ≤ŸÜ",
                "book-volumes": "ÿßŸÑŸÖÿ¨ŸÑÿØÿßÿ™",
                "price-base": "ÿßŸÑÿ≥ÿπÿ± ÿßŸÑÿ£ÿ≥ÿßÿ≥Ÿä",
                "price-discount": "ÿßŸÑÿÆÿµŸÖ",
                "price-final": "ÿßŸÑÿ≥ÿπÿ± ÿßŸÑŸÜŸáÿßÿ¶Ÿä",
                "order-book-btn": "ÿßÿ∑ŸÑÿ® Ÿáÿ∞ÿß ÿßŸÑŸÉÿ™ÿßÿ®",
                "close-btn": "ÿ•ÿ∫ŸÑÿßŸÇ",
                "book-detail-title": "ÿ™ŸÅÿßÿµŸäŸÑ ÿßŸÑŸÉÿ™ÿßÿ®",
                "order-form-title": "ŸÜŸÖŸàÿ∞ÿ¨ ÿ∑ŸÑÿ® ÿßŸÑŸÉÿ™ÿßÿ®",
                "order-form-name": "ÿßŸÑÿßÿ≥ŸÖ ÿßŸÑŸÉÿßŸÖŸÑ",
                "order-form-email": "ÿßŸÑÿ®ÿ±ŸäÿØ ÿßŸÑÿ•ŸÑŸÉÿ™ÿ±ŸàŸÜŸä",
                "order-form-phone": "ÿ±ŸÇŸÖ ÿßŸÑŸáÿßÿ™ŸÅ",
                "order-form-address": "ÿßŸÑÿπŸÜŸàÿßŸÜ ÿßŸÑŸÉÿßŸÖŸÑ",
                "order-form-quantity": "ÿßŸÑŸÉŸÖŸäÿ©",
                "order-form-notes": "ŸÖŸÑÿßÿ≠ÿ∏ÿßÿ™ (ÿßÿÆÿ™Ÿäÿßÿ±Ÿä)",
                "order-form-submit": "ÿ™ÿ£ŸÉŸäÿØ ÿßŸÑÿ∑ŸÑÿ®",
                "cancel-btn": "ÿ•ŸÑÿ∫ÿßÿ°",
                "order-summary-title": "ŸÖŸÑÿÆÿµ ÿßŸÑÿ∑ŸÑÿ®",
                "order-summary-item": "ÿßŸÑÿπŸÜÿµÿ±",
                "order-summary-quantity": "ÿßŸÑŸÉŸÖŸäÿ©",
                "order-summary-price": "ÿ≥ÿπÿ± ÿßŸÑŸàÿ≠ÿØÿ©",
                "order-summary-total": "ÿßŸÑŸÖÿ¨ŸÖŸàÿπ",
                "detect-location": "üìç ÿßŸÑŸÉÿ¥ŸÅ ÿßŸÑÿ™ŸÑŸÇÿßÿ¶Ÿä ÿπŸÜ ÿßŸÑŸÖŸàŸÇÿπ",
                "view-on-map": "üó∫Ô∏è ÿπÿ±ÿ∂ ÿπŸÑŸâ ÿÆÿ±ÿßÿ¶ÿ∑ ÿ¨Ÿàÿ¨ŸÑ",
                "location-permission-text": "ÿßÿ≥ŸÖÿ≠ ÿ®ÿßŸÑŸàÿµŸàŸÑ ÿ•ŸÑŸâ ÿßŸÑŸÖŸàŸÇÿπ ŸÑŸÖŸÑÿ° ÿßŸÑÿπŸÜŸàÿßŸÜ ÿ™ŸÑŸÇÿßÿ¶ŸäŸãÿß",
                "allow-location": "ÿßŸÑÿ≥ŸÖÿßÿ≠ ÿ®ÿßŸÑŸÖŸàŸÇÿπ",
                "whatsapp-indonesia": "Ÿàÿßÿ™ÿ≥ÿßÿ® ÿ•ŸÜÿØŸàŸÜŸäÿ≥Ÿäÿß",
                "whatsapp-indonesia-desc": "ÿ£ÿ±ÿ≥ŸÑ ÿ±ÿ≥ÿßŸÑÿ© ÿ•ŸÑŸâ ÿ±ŸÇŸÖ Ÿàÿßÿ™ÿ≥ÿßÿ® ÿ•ŸÜÿØŸàŸÜŸäÿ≥Ÿäÿß ŸÑŸÑÿ∑ŸÑÿ®ÿßÿ™ ÿßŸÑŸÖÿ≠ŸÑŸäÿ©",
                "whatsapp-arab": "Ÿàÿßÿ™ÿ≥ÿßÿ® ÿßŸÑÿπÿ±ÿ®",
                "whatsapp-arab-desc": "ÿ£ÿ±ÿ≥ŸÑ ÿ±ÿ≥ÿßŸÑÿ© ÿ•ŸÑŸâ ÿ±ŸÇŸÖ Ÿàÿßÿ™ÿ≥ÿßÿ® ÿßŸÑÿπÿ±ÿ® ŸÑŸÑÿ∑ŸÑÿ®ÿßÿ™ ÿßŸÑÿØŸàŸÑŸäÿ©",
                "confirm-order": "ÿ™ÿ£ŸÉŸäÿØ ÿπÿ®ÿ± Ÿàÿßÿ™ÿ≥ÿßÿ®",
                "footer-about": "ŸÖŸÜ ŸÜÿ≠ŸÜ",
                "footer-about-text": "ŸÖÿ™ÿ¨ÿ± ÿßŸÑŸÉÿ™ÿ® ÿßŸÑÿ•ÿ≥ŸÑÿßŸÖŸäÿ© ŸáŸà ŸÖŸÜÿµÿ© ŸÖŸàÿ´ŸàŸÇÿ© ŸÑŸÑÿ≠ÿµŸàŸÑ ÿπŸÑŸâ ŸÉÿ™ÿ® ÿ•ÿ≥ŸÑÿßŸÖŸäÿ© ÿπÿßŸÑŸäÿ© ÿßŸÑÿ¨ŸàÿØÿ© ŸÖŸÜ ŸÖÿÆÿ™ŸÑŸÅ ÿßŸÑŸÜÿßÿ¥ÿ±ŸäŸÜ ÿßŸÑŸÖŸàÿ´ŸàŸÇŸäŸÜ. ŸÜÿ≠ŸÜ ŸÖŸÑÿ™ÿ≤ŸÖŸàŸÜ ÿ®ÿ™ŸàŸÅŸäÿ± ÿßŸÑÿ£ÿØÿ® ÿßŸÑÿ•ÿ≥ŸÑÿßŸÖŸä ÿßŸÑÿ∞Ÿä ŸäŸÖŸÉŸÜ ÿ£ŸÜ Ÿäÿ´ÿ±Ÿä ŸÖÿπÿ±ŸÅÿ™ŸÉ ÿßŸÑÿ±Ÿàÿ≠Ÿäÿ©.",
                "footer-links": "ÿ±Ÿàÿßÿ®ÿ∑ ÿ≥ÿ±Ÿäÿπÿ©",
                "footer-contact": "ÿßÿ™ÿµŸÑ ÿ®ŸÜÿß",
                "footer-address": "ÿ¥ÿßÿ±ÿπ ÿßŸÑŸÖÿ´ÿßŸÑ ÿ±ŸÇŸÖ 123ÿå ÿ¨ÿßŸÉÿ±ÿ™ÿßÿå ÿ•ŸÜÿØŸàŸÜŸäÿ≥Ÿäÿß",
                "footer-phone": "+62 812 3456 7890",
                "footer-email": "info@islamicbookstore.com",
                "footer-copyright": "¬© 2023 ŸÖÿ™ÿ¨ÿ± ÿßŸÑŸÉÿ™ÿ® ÿßŸÑÿ•ÿ≥ŸÑÿßŸÖŸäÿ©. ÿ¨ŸÖŸäÿπ ÿßŸÑÿ≠ŸÇŸàŸÇ ŸÖÿ≠ŸÅŸàÿ∏ÿ©."
            }
        };

        // ==================== KONFIGURASI MATA UANG ====================
        const currencySettings = {
            IDR: { symbol: 'Rp', rate: 1, name: 'Rupiah Indonesia' },
            USD: { symbol: '$', rate: 0.000067, name: 'US Dollar' },
            EGP: { symbol: 'E¬£', rate: 0.0011, name: 'Egyptian Pound' }
        };

        // ==================== INISIALISASI APLIKASI ====================
        document.addEventListener('DOMContentLoaded', function() {
            // Konfigurasi Supabase
            const supabaseUrl = 'https://rfqpsuzmonfmnvthxinb.supabase.co';
            const supabaseAnonKey = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InJmcXBzdXptb25mbW52dGh4aW5iIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjA1OTQyMjUsImV4cCI6MjA3NjE3MDIyNX0.gJFzuE-KJrdSoIKMTIDszTdNLDl_sJkIhgo7wmXRGWA';
            const supabase = window.supabase.createClient(supabaseUrl, supabaseAnonKey);

            // Variabel global
            let currentLanguage = 'id';
            let currentCurrency = 'IDR';
            let books = [];
            let categories = [];
            let publishers = [];
            let banners = [];
            let currencyRates = { usd_rate: 15000, egp_rate: 500 };
            let userLocation = null;
            let selectedWhatsAppOption = null;

            // ==================== FUNGSI UMUM ====================

            // Fungsi untuk mengubah bahasa
            function changeLanguage(lang) {
                currentLanguage = lang;
                document.documentElement.lang = lang;
                
                // Update semua elemen dengan data-lang-key
                const elements = document.querySelectorAll('[data-lang-key]');
                elements.forEach(element => {
                    const key = element.getAttribute('data-lang-key');
                    if (translations[lang] && translations[lang][key]) {
                        element.textContent = translations[lang][key];
                    }
                });
                
                // Refresh tampilan data dengan bahasa baru
                if (books.length > 0) displayBooks();
                if (categories.length > 0) displayCategories();
                if (publishers.length > 0) displayPublishers();
            }

            // Fungsi untuk mengubah mata uang
            function changeCurrency(currency) {
                currentCurrency = currency;
                
                // Update tombol mata uang
                document.getElementById('currentCurrencySymbol').textContent = currency;
                
                // Refresh tampilan data dengan mata uang baru
                if (books.length > 0) displayBooks();
                if (document.getElementById('bookDetailModal').style.display === 'block') {
                    updateBookDetailModal();
                }
                if (document.getElementById('orderFormModal').style.display === 'block') {
                    updateOrderSummary();
                }
            }

            // Fungsi untuk memformat harga
            function formatPrice(priceInUSD) {
                const currency = currencySettings[currentCurrency];
                
                let convertedPrice;
                if (currentCurrency === 'IDR') {
                    convertedPrice = priceInUSD * currencyRates.usd_rate;
                } else if (currentCurrency === 'EGP') {
                    convertedPrice = priceInUSD * currencyRates.egp_rate;
                } else {
                    convertedPrice = priceInUSD;
                }
                
                if (currentCurrency === 'IDR') {
                    return `${currency.symbol} ${Math.round(convertedPrice).toLocaleString('id-ID')}`;
                } else {
                    return `${currency.symbol} ${convertedPrice.toFixed(2)}`;
                }
            }

            // Fungsi untuk menghitung harga setelah diskon
            function calculateDiscountedPrice(basePrice, discount) {
                if (!discount) return basePrice;
                const discountPercent = parseFloat(discount.replace('%', '')) || 0;
                return basePrice * (1 - discountPercent / 100);
            }

            // ==================== FUNGSI BANNER ====================

            // Inisialisasi slider banner
            function initBannerSlider() {
                const slides = document.querySelectorAll('.banner-slide');
                const dots = document.querySelectorAll('.banner-dot');
                const prevBtn = document.querySelector('.banner-prev');
                const nextBtn = document.querySelector('.banner-next');
                let currentSlide = 0;

                function showSlide(index) {
                    slides.forEach(slide => slide.classList.remove('active'));
                    dots.forEach(dot => dot.classList.remove('active'));
                    
                    slides[index].classList.add('active');
                    dots[index].classList.add('active');
                    currentSlide = index;
                }

                function nextSlide() {
                    let nextIndex = (currentSlide + 1) % slides.length;
                    showSlide(nextIndex);
                }

                function prevSlide() {
                    let prevIndex = (currentSlide - 1 + slides.length) % slides.length;
                    showSlide(prevIndex);
                }

                // Event listeners
                nextBtn.addEventListener('click', nextSlide);
                prevBtn.addEventListener('click', prevSlide);
                
                dots.forEach((dot, index) => {
                    dot.addEventListener('click', () => showSlide(index));
                });

                // Auto slide setiap 5 detik
                setInterval(nextSlide, 5000);
            }

            // ==================== FUNGSI DATA ====================

            // Fungsi untuk memuat data dari Supabase
            async function loadData() {
                try {
                    // Load buku
                    const { data: booksData, error: booksError } = await supabase
                        .from('books')
                        .select('*')
                        .order('created_at', { ascending: false });
                    
                    if (booksError) throw booksError;
                    books = booksData || [];
                    
                    // Load kategori
                    const { data: categoriesData, error: categoriesError } = await supabase
                        .from('categories')
                        .select('*');
                    
                    if (categoriesError) throw categoriesError;
                    categories = categoriesData || [];
                    
                    // Load penerbit
                    const { data: publishersData, error: publishersError } = await supabase
                        .from('publishers')
                        .select('*');
                    
                    if (publishersError) throw publishersError;
                    publishers = publishersData || [];
                    
                    // Load banner
                    const { data: bannersData, error: bannersError } = await supabase
                        .from('banners')
                        .select('*')
                        .order('display_order', { ascending: true });
                    
                    if (bannersError) throw bannersError;
                    banners = bannersData || [];
                    
                    // Load kurs mata uang
                    const { data: settingsData, error: settingsError } = await supabase
                        .from('site_settings')
                        .select('usd_rate, egp_rate, contact_phone, contact_email, contact_address, whatsapp_indonesia, whatsapp_arab')
                        .single();
                    
                    if (!settingsError && settingsData) {
                        currencyRates = settingsData;
                        
                        // Update informasi kontak
                        document.getElementById('contactPhone').textContent = settingsData.contact_phone || '+62 812 3456 7890';
                        document.getElementById('contactEmail').textContent = settingsData.contact_email || 'info@tokobukuislam.com';
                        document.getElementById('contactAddress').textContent = settingsData.contact_address || 'Jl. Contoh No. 123, Jakarta, Indonesia';
                        
                        // Update nomor WhatsApp
                        document.getElementById('whatsappIndonesiaNumber').textContent = settingsData.whatsapp_indonesia || '+62 812 3456 7890';
                        document.getElementById('whatsappArabNumber').textContent = settingsData.whatsapp_arab || '+966 123 456 789';
                    }
                    
                    // Tampilkan data
                    displayCategories();
                    displayBooks();
                    displayPublishers();
                    
                } catch (error) {
                    console.error('Error loading data:', error);
                }
            }

            // Fungsi untuk menampilkan kategori
            function displayCategories() {
                const categoriesGrid = document.getElementById('categoriesGrid');
                
                if (categories.length === 0) {
                    categoriesGrid.innerHTML = '<div class="loading" data-lang-key="loading-categories">Memuat kategori...</div>';
                    return;
                }
                
                categoriesGrid.innerHTML = categories.map(category => `
                    <div class="category-card" data-category-id="${category.id}">
                        <img src="${category.image_url || 'https://via.placeholder.com/200x150?text=Kategori'}" alt="${category.name_id}" class="category-image">
                        <div class="category-content">
                            <h3 class="category-name">${currentLanguage === 'id' ? category.name_id : currentLanguage === 'en' ? category.name_en : category.name_ar}</h3>
                            <p class="category-count">${books.filter(book => book.category_id === category.id).length} buku</p>
                        </div>
                    </div>
                `).join('');
                
                // Event listener untuk filter berdasarkan kategori
                document.querySelectorAll('.category-card').forEach(card => {
                    card.addEventListener('click', () => {
                        const categoryId = card.getAttribute('data-category-id');
                        filterBooksByCategory(categoryId);
                    });
                });
            }

            // Fungsi untuk menampilkan buku
            function displayBooks() {
                const featuredBooksGrid = document.getElementById('featuredBooksGrid');
                const allBooksGrid = document.getElementById('allBooksGrid');
                
                if (books.length === 0) {
                    featuredBooksGrid.innerHTML = '<div class="loading" data-lang-key="loading-books">Memuat buku...</div>';
                    allBooksGrid.innerHTML = '<div class="loading" data-lang-key="loading-books">Memuat buku...</div>';
                    return;
                }
                
                // Tampilkan buku unggulan (6 buku pertama)
                const featuredBooks = books.slice(0, 6);
                featuredBooksGrid.innerHTML = featuredBooks.map(book => createBookCard(book)).join('');
                
                // Tampilkan semua buku
                allBooksGrid.innerHTML = books.map(book => createBookCard(book)).join('');
                
                // Tambahkan event listener untuk tombol detail dan pesan
                document.querySelectorAll('.btn-detail').forEach(btn => {
                    btn.addEventListener('click', (e) => {
                        e.stopPropagation();
                        const bookId = btn.closest('.book-card').getAttribute('data-book-id');
                        showBookDetail(bookId);
                    });
                });
                
                document.querySelectorAll('.btn-order').forEach(btn => {
                    btn.addEventListener('click', (e) => {
                        e.stopPropagation();
                        const bookId = btn.closest('.book-card').getAttribute('data-book-id');
                        showOrderForm(bookId);
                    });
                });
            }

            // Fungsi untuk membuat kartu buku
            function createBookCard(book) {
                const publisher = publishers.find(p => p.id === book.publisher_id);
                const category = categories.find(c => c.id === book.category_id);
                
                const basePrice = book.base_price || 0;
                const discount = book.discount || '0';
                const discountPercent = parseFloat(discount.replace('%', '')) || 0;
                const finalPrice = calculateDiscountedPrice(basePrice, discount);
                
                return `
                    <div class="book-card" data-book-id="${book.id}">
                        <img src="${book.cover_image_url || 'https://via.placeholder.com/280x250?text=Buku'}" alt="${book.title}" class="book-image">
                        <div class="book-content">
                            <h3 class="book-title">${book.title}</h3>
                            <p class="book-author">${book.author}</p>
                            <div class="book-meta">
                                <div class="book-meta-item">
                                    <span>üìö</span>
                                    <span>${publisher ? publisher.name : '-'}</span>
                                </div>
                                <div class="book-meta-item">
                                    <span>üè∑Ô∏è</span>
                                    <span>${category ? (currentLanguage === 'id' ? category.name_id : currentLanguage === 'en' ? category.name_en : category.name_ar) : '-'}</span>
                                </div>
                            </div>
                            <div class="book-price">
                                ${discountPercent > 0 ? `
                                    <span class="price-original">${formatPrice(basePrice)}</span>
                                    <span class="discount-badge">-${discountPercent}%</span>
                                ` : ''}
                                <span class="price-final">${formatPrice(finalPrice)}</span>
                            </div>
                            <div class="book-actions">
                                <button class="btn btn-order" data-lang-key="order-book-btn">Pesan</button>
                                <button class="btn btn-detail" data-lang-key="detail-btn">Detail</button>
                            </div>
                        </div>
                    </div>
                `;
            }

            // Fungsi untuk menampilkan penerbit
            function displayPublishers() {
                const publishersGrid = document.getElementById('publishersGrid');
                
                if (publishers.length === 0) {
                    publishersGrid.innerHTML = '<div class="loading" data-lang-key="loading-publishers">Memuat penerbit...</div>';
                    return;
                }
                
                publishersGrid.innerHTML = publishers.map(publisher => `
                    <div class="publisher-card" data-publisher-id="${publisher.id}">
                        <img src="${publisher.logo_url || 'https://via.placeholder.com/80x80?text=Logo'}" alt="${publisher.name}" class="publisher-logo">
                        <h3 class="publisher-name">${publisher.name}</h3>
                        ${publisher.discount ? `<p class="publisher-discount">${publisher.discount}</p>` : ''}
                    </div>
                `).join('');
                
                // Event listener untuk filter berdasarkan penerbit
                document.querySelectorAll('.publisher-card').forEach(card => {
                    card.addEventListener('click', () => {
                        const publisherId = card.getAttribute('data-publisher-id');
                        filterBooksByPublisher(publisherId);
                    });
                });
            }

            // Fungsi untuk filter buku berdasarkan kategori
            function filterBooksByCategory(categoryId) {
                const filteredBooks = books.filter(book => book.category_id === categoryId);
                const allBooksGrid = document.getElementById('allBooksGrid');
                
                if (filteredBooks.length === 0) {
                    allBooksGrid.innerHTML = '<div class="loading">Tidak ada buku dalam kategori ini.</div>';
                } else {
                    allBooksGrid.innerHTML = filteredBooks.map(book => createBookCard(book)).join('');
                    
                    // Tambahkan event listener untuk tombol detail dan pesan
                    document.querySelectorAll('.btn-detail').forEach(btn => {
                        btn.addEventListener('click', (e) => {
                            e.stopPropagation();
                            const bookId = btn.closest('.book-card').getAttribute('data-book-id');
                            showBookDetail(bookId);
                        });
                    });
                    
                    document.querySelectorAll('.btn-order').forEach(btn => {
                        btn.addEventListener('click', (e) => {
                            e.stopPropagation();
                            const bookId = btn.closest('.book-card').getAttribute('data-book-id');
                            showOrderForm(bookId);
                        });
                    });
                }
                
                // Scroll ke bagian buku
                document.getElementById('allBooksGrid').scrollIntoView({ behavior: 'smooth' });
            }

            // Fungsi untuk filter buku berdasarkan penerbit
            function filterBooksByPublisher(publisherId) {
                const filteredBooks = books.filter(book => book.publisher_id === publisherId);
                const allBooksGrid = document.getElementById('allBooksGrid');
                
                if (filteredBooks.length === 0) {
                    allBooksGrid.innerHTML = '<div class="loading">Tidak ada buku dari penerbit ini.</div>';
                } else {
                    allBooksGrid.innerHTML = filteredBooks.map(book => createBookCard(book)).join('');
                    
                    // Tambahkan event listener untuk tombol detail dan pesan
                    document.querySelectorAll('.btn-detail').forEach(btn => {
                        btn.addEventListener('click', (e) => {
                            e.stopPropagation();
                            const bookId = btn.closest('.book-card').getAttribute('data-book-id');
                            showBookDetail(bookId);
                        });
                    });
                    
                    document.querySelectorAll('.btn-order').forEach(btn => {
                        btn.addEventListener('click', (e) => {
                            e.stopPropagation();
                            const bookId = btn.closest('.book-card').getAttribute('data-book-id');
                            showOrderForm(bookId);
                        });
                    });
                }
                
                // Scroll ke bagian buku
                document.getElementById('allBooksGrid').scrollIntoView({ behavior: 'smooth' });
            }

            // ==================== FUNGSI LOKASI ====================

            // Fungsi untuk meminta izin lokasi
            function requestLocationPermission() {
                if (!navigator.geolocation) {
                    alert('Browser Anda tidak mendukung geolocation.');
                    return;
                }
                
                document.getElementById('locationPermission').style.display = 'block';
            }

            // Fungsi untuk mendapatkan lokasi pengguna
            function getUserLocation() {
                return new Promise((resolve, reject) => {
                    if (!navigator.geolocation) {
                        reject(new Error('Browser tidak mendukung geolocation'));
                        return;
                    }
                    
                    navigator.geolocation.getCurrentPosition(
                        (position) => {
                            const { latitude, longitude } = position.coords;
                            resolve({ latitude, longitude });
                        },
                        (error) => {
                            reject(error);
                        },
                        {
                            enableHighAccuracy: true,
                            timeout: 10000,
                            maximumAge: 60000
                        }
                    );
                });
            }

            // Fungsi untuk mendapatkan alamat dari koordinat
            async function getAddressFromCoordinates(lat, lng) {
                try {
                    const response = await fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${lat}&lon=${lng}`);
                    const data = await response.json();
                    
                    if (data && data.display_name) {
                        return data.display_name;
                    } else {
                        throw new Error('Tidak dapat menemukan alamat');
                    }
                } catch (error) {
                    console.error('Error getting address:', error);
                    throw error;
                }
            }

            // Fungsi untuk mendeteksi lokasi otomatis
            async function detectLocation() {
                try {
                    document.getElementById('detectLocation').textContent = 'Mendeteksi lokasi...';
                    document.getElementById('detectLocation').disabled = true;
                    
                    const position = await getUserLocation();
                    const address = await getAddressFromCoordinates(position.latitude, position.longitude);
                    
                    document.getElementById('customerAddress').value = address;
                    userLocation = {
                        latitude: position.latitude,
                        longitude: position.longitude,
                        address: address
                    };
                    
                    // Tampilkan tombol lihat di Google Maps
                    document.getElementById('viewOnMap').style.display = 'inline-block';
                    
                    // Sembunyikan permintaan izin lokasi
                    document.getElementById('locationPermission').style.display = 'none';
                    
                    alert('Lokasi berhasil dideteksi!');
                } catch (error) {
                    console.error('Error detecting location:', error);
                    alert('Gagal mendeteksi lokasi. Silakan izinkan akses lokasi atau isi alamat manual.');
                } finally {
                    document.getElementById('detectLocation').textContent = 'üìç Deteksi Lokasi Otomatis';
                    document.getElementById('detectLocation').disabled = false;
                }
            }

            // Fungsi untuk membuka Google Maps
            function openGoogleMaps() {
                if (!userLocation) {
                    alert('Silakan deteksi lokasi terlebih dahulu.');
                    return;
                }
                
                const { latitude, longitude } = userLocation;
                const mapsUrl = `https://www.google.com/maps?q=${latitude},${longitude}`;
                window.open(mapsUrl, '_blank');
            }

            // ==================== FUNGSI WHATSAPP ====================

            // Fungsi untuk memilih opsi WhatsApp
            function selectWhatsAppOption(option) {
                selectedWhatsAppOption = option;
                
                // Hapus kelas selected dari semua opsi
                document.querySelectorAll('.whatsapp-option').forEach(opt => {
                    opt.classList.remove('selected');
                });
                
                // Tambahkan kelas selected ke opsi yang dipilih
                document.querySelector(`.whatsapp-option[data-option="${option}"]`).classList.add('selected');
            }

            // Fungsi untuk mengirim pesan WhatsApp
            function sendWhatsAppMessage() {
                if (!selectedWhatsAppOption) {
                    alert('Silakan pilih opsi WhatsApp terlebih dahulu.');
                    return;
                }
                
                const bookId = document.getElementById('orderBookId').value;
                const book = books.find(b => b.id === bookId);
                if (!book) return;
                
                const basePrice = book.base_price || 0;
                const discount = book.discount || '0';
                const finalPrice = calculateDiscountedPrice(basePrice, discount);
                const quantity = parseInt(document.getElementById('orderQuantity').value) || 1;
                const totalPrice = finalPrice * quantity;
                
                const customerName = document.getElementById('customerName').value;
                const customerPhone = document.getElementById('customerPhone').value;
                const customerEmail = document.getElementById('customerEmail').value;
                const customerAddress = document.getElementById('customerAddress').value;
                const orderNotes = document.getElementById('orderNotes').value;
                
                // Tentukan nomor WhatsApp berdasarkan pilihan
                let phoneNumber;
                if (selectedWhatsAppOption === 'indonesia') {
                    phoneNumber = document.getElementById('whatsappIndonesiaNumber').textContent.replace(/\s/g, '');
                } else {
                    phoneNumber = document.getElementById('whatsappArabNumber').textContent.replace(/\s/g, '');
                }
                
                // Buat pesan
                let message = '';
                
                if (currentLanguage === 'id') {
                    message = `Halo, saya ingin memesan buku:\n\n` +
                             `*Judul Buku:* ${book.title}\n` +
                             `*Penulis:* ${book.author}\n` +
                             `*Jumlah:* ${quantity}\n` +
                             `*Harga Satuan:* ${formatPrice(finalPrice)}\n` +
                             `*Total Harga:* ${formatPrice(totalPrice)}\n\n` +
                             `*Data Pemesan:*\n` +
                             `Nama: ${customerName}\n` +
                             `Telepon: ${customerPhone}\n` +
                             `Email: ${customerEmail}\n` +
                             `Alamat: ${customerAddress}\n` +
                             `Catatan: ${orderNotes || '-'}\n\n`;
                             
                    if (userLocation) {
                        message += `Lokasi: https://www.google.com/maps?q=${userLocation.latitude},${userLocation.longitude}\n\n`;
                    }
                    
                    message += `Terima kasih!`;
                } else if (currentLanguage === 'en') {
                    message = `Hello, I would like to order a book:\n\n` +
                             `*Book Title:* ${book.title}\n` +
                             `*Author:* ${book.author}\n` +
                             `*Quantity:* ${quantity}\n` +
                             `*Unit Price:* ${formatPrice(finalPrice)}\n` +
                             `*Total Price:* ${formatPrice(totalPrice)}\n\n` +
                             `*Customer Data:*\n` +
                             `Name: ${customerName}\n` +
                             `Phone: ${customerPhone}\n` +
                             `Email: ${customerEmail}\n` +
                             `Address: ${customerAddress}\n` +
                             `Notes: ${orderNotes || '-'}\n\n`;
                             
                    if (userLocation) {
                        message += `Location: https://www.google.com/maps?q=${userLocation.latitude},${userLocation.longitude}\n\n`;
                    }
                    
                    message += `Thank you!`;
                } else if (currentLanguage === 'ar') {
                    message = `ŸÖÿ±ÿ≠ÿ®ÿßŸãÿå ÿ£ŸàÿØ ÿ∑ŸÑÿ® ŸÉÿ™ÿßÿ®:\n\n` +
                             `*ÿπŸÜŸàÿßŸÜ ÿßŸÑŸÉÿ™ÿßÿ®:* ${book.title}\n` +
                             `*ÿßŸÑŸÖÿ§ŸÑŸÅ:* ${book.author}\n` +
                             `*ÿßŸÑŸÉŸÖŸäÿ©:* ${quantity}\n` +
                             `*ÿ≥ÿπÿ± ÿßŸÑŸàÿ≠ÿØÿ©:* ${formatPrice(finalPrice)}\n` +
                             `*ÿßŸÑÿ≥ÿπÿ± ÿßŸÑÿ•ÿ¨ŸÖÿßŸÑŸä:* ${formatPrice(totalPrice)}\n\n` +
                             `*ÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑÿπŸÖŸäŸÑ:*\n` +
                             `ÿßŸÑÿßÿ≥ŸÖ: ${customerName}\n` +
                             `ÿßŸÑŸáÿßÿ™ŸÅ: ${customerPhone}\n` +
                             `ÿßŸÑÿ®ÿ±ŸäÿØ ÿßŸÑÿ•ŸÑŸÉÿ™ÿ±ŸàŸÜŸä: ${customerEmail}\n` +
                             `ÿßŸÑÿπŸÜŸàÿßŸÜ: ${customerAddress}\n` +
                             `ŸÖŸÑÿßÿ≠ÿ∏ÿßÿ™: ${orderNotes || '-'}\n\n`;
                             
                    if (userLocation) {
                        message += `ÿßŸÑŸÖŸàŸÇÿπ: https://www.google.com/maps?q=${userLocation.latitude},${userLocation.longitude}\n\n`;
                    }
                    
                    message += `ÿ¥ŸÉÿ±ÿßŸã!`;
                }
                
                // Encode pesan untuk URL
                const encodedMessage = encodeURIComponent(message);
                
                // Buat URL WhatsApp
                const whatsappUrl = `https://wa.me/${phoneNumber}?text=${encodedMessage}`;
                
                // Buka WhatsApp
                window.open(whatsappUrl, '_blank');
                
                // Tutup modal
                document.getElementById('orderFormModal').style.display = 'none';
            }

            // ==================== FUNGSI MODAL ====================

            // Fungsi untuk menampilkan modal detail buku
            function showBookDetail(bookId) {
                const book = books.find(b => b.id === bookId);
                if (!book) return;
                
                const publisher = publishers.find(p => p.id === book.publisher_id);
                const category = categories.find(c => c.id === book.category_id);
                
                const basePrice = book.base_price || 0;
                const discount = book.discount || '0';
                const discountPercent = parseFloat(discount.replace('%', '')) || 0;
                const finalPrice = calculateDiscountedPrice(basePrice, discount);
                
                // Isi data ke modal
                document.getElementById('detailBookImage').src = book.cover_image_url || 'https://via.placeholder.com/400x500?text=Buku';
                document.getElementById('detailBookTitle').textContent = book.title;
                document.getElementById('detailBookAuthor').textContent = book.author;
                document.getElementById('detailBookPublisher').textContent = publisher ? publisher.name : '-';
                document.getElementById('detailBookCategory').textContent = category ? (currentLanguage === 'id' ? category.name_id : currentLanguage === 'en' ? category.name_en : category.name_ar) : '-';
                document.getElementById('detailBookYear').textContent = book.year || '-';
                document.getElementById('detailBookPages').textContent = book.pages || '-';
                document.getElementById('detailBookCoverType').textContent = book.cover_type || '-';
                document.getElementById('detailBookPaperType').textContent = book.paper_type || '-';
                document.getElementById('detailBookWeight').textContent = book.weight_value && book.weight_unit ? `${book.weight_value} ${book.weight_unit}` : '-';
                document.getElementById('detailBookVolumes').textContent = book.volumes || '-';
                document.getElementById('detailBookDescription').textContent = book.description || 'Tidak ada deskripsi tersedia.';
                
                // Update harga
                updateBookDetailModal();
                
                // Set data untuk tombol pesan
                document.getElementById('orderBookBtn').setAttribute('data-book-id', book.id);
                
                // Tampilkan modal
                document.getElementById('bookDetailModal').style.display = 'block';
            }

            // Fungsi untuk memperbarui harga di modal detail buku
            function updateBookDetailModal() {
                const bookId = document.getElementById('orderBookBtn').getAttribute('data-book-id');
                const book = books.find(b => b.id === bookId);
                if (!book) return;
                
                const basePrice = book.base_price || 0;
                const discount = book.discount || '0';
                const discountPercent = parseFloat(discount.replace('%', '')) || 0;
                const finalPrice = calculateDiscountedPrice(basePrice, discount);
                
                document.getElementById('detailBasePrice').textContent = formatPrice(basePrice);
                document.getElementById('detailDiscount').textContent = discountPercent > 0 ? `${discountPercent}%` : '-';
                document.getElementById('detailFinalPrice').textContent = formatPrice(finalPrice);
            }

            // Fungsi untuk menampilkan form pemesanan
            function showOrderForm(bookId) {
                const book = books.find(b => b.id === bookId);
                if (!book) return;
                
                const publisher = publishers.find(p => p.id === book.publisher_id);
                const basePrice = book.base_price || 0;
                const discount = book.discount || '0';
                const finalPrice = calculateDiscountedPrice(basePrice, discount);
                
                // Reset form
                document.getElementById('orderForm').reset();
                userLocation = null;
                selectedWhatsAppOption = null;
                document.getElementById('viewOnMap').style.display = 'none';
                document.querySelectorAll('.whatsapp-option').forEach(opt => {
                    opt.classList.remove('selected');
                });
                
                // Isi data buku ke form
                document.getElementById('orderBookId').value = book.id;
                document.getElementById('orderBookTitle').value = book.title;
                document.getElementById('orderBookImage').src = book.cover_image_url || 'https://via.placeholder.com/100x120?text=Buku';
                document.getElementById('orderBookTitleText').textContent = book.title;
                document.getElementById('orderBookAuthorText').textContent = book.author;
                document.getElementById('orderBookPriceText').textContent = formatPrice(finalPrice);
                
                // Update ringkasan pesanan
                updateOrderSummary();
                
                // Tampilkan permintaan izin lokasi
                requestLocationPermission();
                
                // Tampilkan modal
                document.getElementById('orderFormModal').style.display = 'block';
            }

            // Fungsi untuk memperbarui ringkasan pesanan
            function updateOrderSummary() {
                const bookId = document.getElementById('orderBookId').value;
                const book = books.find(b => b.id === bookId);
                if (!book) return;
                
                const basePrice = book.base_price || 0;
                const discount = book.discount || '0';
                const finalPrice = calculateDiscountedPrice(basePrice, discount);
                const quantity = parseInt(document.getElementById('orderQuantity').value) || 1;
                const totalPrice = finalPrice * quantity;
                
                document.getElementById('summaryItem').textContent = book.title;
                document.getElementById('summaryQuantity').textContent = quantity;
                document.getElementById('summaryUnitPrice').textContent = formatPrice(finalPrice);
                document.getElementById('summaryTotalPrice').textContent = formatPrice(totalPrice);
            }

            // ==================== EVENT LISTENERS ====================

            // Event listener untuk tombol tutup banner
            document.getElementById('closeBanner').addEventListener('click', function() {
                document.getElementById('topBanner').style.display = 'none';
            });

            // Event listener untuk pemilih bahasa
            const languageBtn = document.getElementById('languageBtn');
            const languageDropdown = document.getElementById('languageDropdown');
            
            languageBtn.addEventListener('click', () => {
                languageDropdown.classList.toggle('show');
            });
            
            document.querySelectorAll('.language-option').forEach(option => {
                option.addEventListener('click', () => {
                    const lang = option.getAttribute('data-lang');
                    changeLanguage(lang);
                    
                    // Update tombol bahasa
                    document.querySelectorAll('.language-option').forEach(opt => opt.classList.remove('active'));
                    option.classList.add('active');
                    
                    const flag = option.querySelector('span:first-child').textContent;
                    const text = option.querySelector('span:last-child').textContent;
                    document.getElementById('currentLangFlag').textContent = flag;
                    document.getElementById('currentLangText').textContent = text;
                    
                    languageDropdown.classList.remove('show');
                });
            });

            // Event listener untuk pemilih mata uang
            const currencyBtn = document.getElementById('currencyBtn');
            const currencyDropdown = document.getElementById('currencyDropdown');
            
            currencyBtn.addEventListener('click', () => {
                currencyDropdown.classList.toggle('show');
            });
            
            document.querySelectorAll('.currency-option').forEach(option => {
                option.addEventListener('click', () => {
                    const currency = option.getAttribute('data-currency');
                    changeCurrency(currency);
                    
                    // Update tombol mata uang
                    document.querySelectorAll('.currency-option').forEach(opt => opt.classList.remove('active'));
                    option.classList.add('active');
                    
                    currencyDropdown.classList.remove('show');
                });
            });

            // Event listener untuk deteksi lokasi
            document.getElementById('detectLocation').addEventListener('click', detectLocation);
            
            // Event listener untuk izin lokasi
            document.getElementById('allowLocation').addEventListener('click', detectLocation);
            
            // Event listener untuk lihat di Google Maps
            document.getElementById('viewOnMap').addEventListener('click', openGoogleMaps);
            
            // Event listener untuk pilihan WhatsApp
            document.querySelectorAll('.whatsapp-option .btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const option = this.closest('.whatsapp-option').getAttribute('data-option');
                    selectWhatsAppOption(option);
                    sendWhatsAppMessage();
                });
            });

            // Event listener untuk perubahan jumlah pesanan
            document.getElementById('orderQuantity').addEventListener('change', updateOrderSummary);
            document.getElementById('orderQuantity').addEventListener('input', updateOrderSummary);

            // Event listener untuk menutup modal
            document.querySelectorAll('.close-modal, .btn-secondary').forEach(btn => {
                btn.addEventListener('click', function() {
                    const modalId = this.getAttribute('data-modal');
                    if (modalId) {
                        document.getElementById(modalId).style.display = 'none';
                    }
                });
            });

            // Event listener untuk tombol pesan di modal detail
            document.getElementById('orderBookBtn').addEventListener('click', function() {
                const bookId = this.getAttribute('data-book-id');
                document.getElementById('bookDetailModal').style.display = 'none';
                showOrderForm(bookId);
            });

            // Event listener untuk menutup modal saat klik di luar
            window.addEventListener('click', (e) => {
                if (e.target.classList.contains('modal')) {
                    e.target.style.display = 'none';
                }
                
                // Tutup dropdown bahasa dan mata uang saat klik di luar
                if (!languageBtn.contains(e.target) && !languageDropdown.contains(e.target)) {
                    languageDropdown.classList.remove('show');
                }
                
                if (!currencyBtn.contains(e.target) && !currencyDropdown.contains(e.target)) {
                    currencyDropdown.classList.remove('show');
                }
            });

            // ==================== INISIALISASI ====================

            // Inisialisasi aplikasi
            initBannerSlider();
            loadData();
            
            // Set bahasa default
            changeLanguage('id');
            
            // Set mata uang default
            changeCurrency('IDR');
        });
    </script>
</body>
</html>
